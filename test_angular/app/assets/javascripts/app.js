
















































































 
 
 
 
     
     
     
     
     
     
      
      
      
      
      
      
      
      
      
       
        
        
         
         
         
         
          
          
          
          
          
          
          
           
            
            
              
              
                $scope.pay(ingridient.cost, ingridient.provider, ingridient.name);
                var ingridient = pizza.ingridients[i];
              $mdDialog.hide();
              $mdDialog.hide();
            $mdDialog.cancel();
            $mdDialog.cancel();
            $mdDialog.hide(answer);
            $mdDialog.hide(answer);
            $scope.pay(ingridient.cost, ingridient.provider, ingridient.name);
            $scope.payNew($scope.firstContract,providers[i],ingridient.cost,1,i);            
            contract.customerConfirmed = true;
            contract.providerConfirmed = false;
            contract.warrantyPayed = false;//$scope.warranty($scope.secondContract,3);
            for(var i = 0; i < pizza.ingridients.length; i ++){
            total += pizza.ingridients[i].cost;
            var ingridient = pizza.ingridients[i];
            var ingridient = pizza.ingridients[i];
            }
           //$scope.initProviders($scope.firstContract,1,i);            
          $mdDialog.hide();
          $mdDialog.hide();
          $scope.answer = function(answer) {
          $scope.answer = function(answer) {
          $scope.cancel = function() {
          $scope.cancel = function() {
          $scope.currentContract = contract;
          $scope.ethCoeff = ethCoeff;
          $scope.hide = function() {
          $scope.hide = function() {
          $scope.hide = function() {
          $scope.hide = function() {
          $scope.ingridients = pizza.ingridients;
          $scope.mess = "pizza";
          $scope.pay = function(cost, provider, name){
          $scope.payAll = function(){
          $scope.pizza = pizza;
          $scope.tab1tittle = pizza.name;
          $scope.total = total;
          $scope.totalEth = total / ethCoeff;
          //alert(pizza.ingridients[i].name);            
          //var bal = web3.fromWei(web3.eth.getBalance('0x762b3b06026b61f6e23b5d7355fc42421697a5cc '));
          //var bal = web3.fromWei(web3.eth.getBalance('0x762b3b06026b61f6e23b5d7355fc42421697a5cc '));
          alert(res); 
          alert(res); 
          alert(res); 
          alert(res); 
          alert(res); 
          alert(res); 
          alert(url);
          contract.contractDone = false;
          contract.customerConfirmed = false;
          contract.moneyInContract = 6999//$scope.testMethod();
          contract.progress = contract.moneyInContract * 100 / contract.cost;
          contract.providerConfirmed = false;
          contract.warrantyPayed = false;
          cost: 100,
          cost: 15,
          cost: 15,
          cost: 20,
          cost: 24,
          cost: 24,
          cost: 36,
          cost: 45,
          cost: 6,
          cost: 6,
          cost: 6,
          for (var i = pizza.ingridients.length - 1; i >= 0; i--) {
          if (contract.type != "warranty"){
          name: 'cheese',
          name: 'cheese',
          name: 'cheese',
          name: 'dough',
          name: 'dough',
          name: 'dough',
          name: 'meat',
          name: 'mushroom',
          name: 'olives',
          name: 'tomato',
          name: 'tomato',
          pizza.price = total;
          provider: '1',
          provider: '1',
          provider: '2',
          provider: '3',
          provider: '3',
          provider: '3',
          provider: '4',
          provider: '4',
          provider: '5',
          provider: '5',
          provider: '5',
          total *= coefficient;
          var coefficient = 3;
          var ethCoeff = 613;
          var res = contr.contractDone.sendTransaction({from: web3.eth.coinbase});
          var res = contr.contractDone.sendTransaction({from: web3.eth.coinbase});
          var res = contr.contractNotDone.sendTransaction({from: web3.eth.coinbase});
          var res = contr.contractNotDone.sendTransaction({from: web3.eth.coinbase});
          var res = contr.warranty.call(amount);
          var res = contr.warranty.call(amount);
          var total = 0;
          web3.personal.unlockAccount($scope.myToken,"qbasik007");
          web3.personal.unlockAccount($scope.myToken,"qbasik007");
          web3.personal.unlockAccount($scope.myToken,"qbasik007");
          web3.personal.unlockAccount($scope.myToken,"qbasik007");
          weight: 120,
          weight: 20,
          weight: 30,
          weight: 30,
          weight: 35,
          weight: 35,
          weight: 40,
          weight: 40,
          weight: 80,
          weight: 80,
          weight: 80,
          }
          }
          } else {
          };
          };
          };
          };
          };
          };
          };
          };
         $scope.testMethod($scope.firstContract);
         alert(contr.address + "\n" + bal1);
         alert(contr.address + "\n" + bal1);
         var bal1 = contr.checkBalance.call();
         var bal1 = contr.checkBalance.call();
        $mdDialog.cancel();
        $mdDialog.cancel();
        $mdDialog.hide(answer);
        $mdDialog.hide(answer);
        $scope.status = 'You cancelled the dialog.';
        $scope.status = 'You cancelled the dialog.';
        $scope.status = 'You cancelled the dialog.';
        $scope.status = 'You said the information was "' + answer + '".';
        $scope.status = 'You said the information was "' + answer + '".';
        $scope.status = 'You said the information was "' + answer + '".';
        clickOutsideToClose:true,
        clickOutsideToClose:true,
        clickOutsideToClose:true,
        contr.pay.sendTransaction(ingridientAmount,{from: web3.eth.coinbase});
        contr.pay.sendTransaction(web3.toWei(0.1,'ether'),provAddr,ingridientAmount,iter,{from: web3.eth.coinbase});
        controller: function DialogController($scope, $mdDialog) {
        controller: function DialogController($scope, $mdDialog) {
        controller: function DialogController($scope, $mdDialog) {
        controller: function DialogController($scope, $mdDialog) {
        description: 'Very good pizza!',
        description: 'Very good pizza!',
        description: 'Very good pizza!',
        for(var i = 0; i < pizza.ingridients.length; i ++){
        for(var i = 0; i < pizza.ingridients.length; i ++){
        fullscreen: $scope.customFullscreen // Only for -xs, -sm breakpoints.
        fullscreen: $scope.customFullscreen // Only for -xs, -sm breakpoints.
        fullscreen: $scope.customFullscreen // Only for -xs, -sm breakpoints.
        id: 1,
        id: 2,
        id: 3,
        image: 'assets/6.jpg',
        image: 'assets/6.jpg',
        image: 'assets/6.jpg',
        ingridients: [{
        ingridients: [{
        ingridients: [{
        name: 'Maltija (Maltese)',
        name: 'Quattro Formaggi',
        name: 'Vegetariana',
        parent: angular.element(document.body),
        parent: angular.element(document.body),
        parent: angular.element(document.body),
        price: -1,
        price: -1,
        price: -1,
        targetEvent: ev,
        targetEvent: ev,
        targetEvent: ev,
        templateUrl: 'double_key_contract/index',
        templateUrl: 'warranty_contract/index',
        templateUrl: url,
        total += pizza.ingridients[i].cost;
        total += pizza.ingridients[i].cost;
        var abiFirst = [{"constant":false,"inputs":[],"name":"check1","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"contractDone","outputs":[{"name":"","type":"bool"}],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"money","type":"uint256"},{"name":"addr","type":"address"},{"name":"goods","type":"uint256"},{"name":"iter","type":"uint256"}],"name":"pay","outputs":[{"name":"","type":"uint256"}],"payable":true,"type":"function"},{"constant":false,"inputs":[],"name":"contractNotDone","outputs":[{"name":"","type":"bool"}],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"tmpAddr","type":"address"}],"name":"search","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"provAddrs","type":"address"},{"name":"count","type":"uint256"},{"name":"iter","type":"uint256"}],"name":"init","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"check2","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"checkBalance","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"payable":true,"type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"sender","type":"address"},{"indexed":false,"name":"_provAddress","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Deposit","type":"event"}];
        web3.eth.sendTransaction({from: web3.eth.coinbase, to: contr.address, value: web3.toWei(1,'ether')});          
        web3.eth.sendTransaction({from: web3.eth.coinbase, to: contr.address, value: web3.toWei(1,'ether')});          
        web3.personal.unlockAccount($scope.myToken,"qbasik007");      
        web3.personal.unlockAccount($scope.myToken,"qbasik007");      
        }
        }
        }*/
        },
        },
        },{
        },{
        },{
        },{
        },{
        },{
        },{
        },{
        }]
        }]
        }]
       //contr.init.sendTransaction(providerAddress,providersAmount,iter,{from: web3.eth.coinbase});      
       contr.init.sendTransaction(providerAddress,providersAmount,{from: web3.eth.coinbase});      
       contr.init.sendTransaction({from: web3.eth.coinbase});      
       contr.init.sendTransaction({from: web3.eth.coinbase});      
       web3.personal.unlockAccount($scope.myToken,"qbasik007");            
       web3.personal.unlockAccount($scope.myToken,"qbasik007");            
      $mdDialog.show({
      $mdDialog.show({
      $mdDialog.show({
      $scope.answer = function(answer) {
      $scope.answer = function(answer) {
      $scope.cancel = function() {
      $scope.cancel = function() {
      $scope.ethCoeff = ethCoeff;
      $scope.ethCoeff = ethCoeff;
      $scope.firstContract = web3.eth.contract(abiFirst).at(firstContractAddress);
      $scope.firstContract;
      $scope.ingridients = pizza.ingridients;
      $scope.ingridients = pizza.ingridients;
      $scope.mess = "pizza";
      $scope.mess = "pizza";
      $scope.pay = function(cost, provider, name){
      $scope.payAll = function(){
      $scope.payAll = function(){
      $scope.pizza = pizza;
      $scope.pizza = pizza;
      $scope.secondContract = web3.eth.contract(abiFirst).at(secondContractAddress);
      $scope.secondContract = web3.eth.contract(abiFirst).at(secondContractAddress);
      $scope.secondContract;
      $scope.secondContract;
      $scope.status = 'You cancelled the dialog.';
      $scope.status = 'You said the information was "' + answer + '".';
      $scope.tab1tittle = pizza.name;
      $scope.tab1tittle = pizza.name;
      $scope.thirdContract = web3.eth.contract(abiFirst).at(thirdContractAddress);
      $scope.thirdContract;
      $scope.total = total;
      $scope.total = total;
      $scope.totalEth = total / ethCoeff;
      $scope.totalEth = total / ethCoeff;
      $scope.warranty = function(contr,amount){
      $scope.warranty = function(contr,amount){
      /*var abiSecond = [{"constant":false,"inputs":[],"name":"contractDone","outputs":[{"name":"","type":"bool"}],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"provAddrs","type":"address"},{"name":"count","type":"uint256"}],"name":"init","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"contractNotDone","outputs":[],"payable":true,"type":"function"},{"constant":false,"inputs":[],"name":"returnState","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"goods","type":"uint256"}],"name":"pay","outputs":[{"name":"","type":"uint256"}],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"warrAmount","type":"uint256"}],"name":"warranty","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"checkBalance","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"payable":true,"type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"sender","type":"address"},{"indexed":false,"name":"_provAddress","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Deposit","type":"event"}];
      address1: address1_1,
      address2: address2_1,
      clickOutsideToClose:true,
      company1: company1_1,
      company2: company2_1,
      cost: cost_1,
      date: date_1,
      for (var i = pizza.ingridients.length - 1; i >= 0; i--) {
      for (var i = pizza.ingridients.length - 1; i >= 0; i--) {
      fullscreen: $scope.customFullscreen // Only for -xs, -sm breakpoints.
      name: name1,
      parent: angular.element(document.body),
      pizza.price = total;
      pizza.price = total;
      targetEvent: ev,
      templateUrl: 'solution_controller/index',
      total *= coefficient;
      total *= coefficient;
      type: type1,
      var abiSecond = [{"constant":false,"inputs":[],"name":"contractDone","outputs":[{"name":"","type":"bool"}],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"provAddrs","type":"address"},{"name":"count","type":"uint256"}],"name":"init","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"contractNotDone","outputs":[],"payable":true,"type":"function"},{"constant":false,"inputs":[],"name":"returnState","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"goods","type":"uint256"}],"name":"pay","outputs":[{"name":"","type":"uint256"}],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"warrAmount","type":"uint256"}],"name":"warranty","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"checkBalance","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"payable":true,"type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"sender","type":"address"},{"indexed":false,"name":"_provAddress","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Deposit","type":"event"}];
      var abiThird = [{"constant":false,"inputs":[],"name":"customerConfirm","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"contractDone","outputs":[{"name":"","type":"bool"}],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"provAddrs","type":"address"},{"name":"count","type":"uint256"}],"name":"init","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"contractNotDone","outputs":[],"payable":true,"type":"function"},{"constant":false,"inputs":[],"name":"returnState","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"providerConfirm","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"goods","type":"uint256"}],"name":"pay","outputs":[{"name":"","type":"uint256"}],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"warrAmount","type":"uint256"}],"name":"warranty","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"checkBalance","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"payable":true,"type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"sender","type":"address"},{"indexed":false,"name":"_provAddress","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Deposit","type":"event"}];
      var coefficient = 3;
      var coefficient = 3;
      var ethCoeff = 613;
      var ethCoeff = 613;
      var providers = ["0x353e3437ce2aa167f957ea4d3accba6d2e328164","0x5034ded7f8c496465b11d1106e0c17aca7f00f09","0x6d7abef65264b286dc7d771a0226543c3683a9cf","0x1873960d5cd3e84672313aed4794d9664ee6ad94"];
      var total = 0;
      var total = 0;
      volume: volume_1,
      warrantyLimit: warrantyLimit_1
      {
      {
      {
      }
      }
      }
      }).then(function(answer) {
      }).then(function(answer) {
      }).then(function(answer) {
      });
      });
      });
      },
      },
      }, function() {
      }, function() {
      }, function() {
      };
      };
      };
      };
      };
      };
      };
      };
      };
     $scope.accounts = accounts;
     $scope.accounts = accounts;
     $scope.contractDone = function(contr){       
     $scope.contractDone = function(contr){       
     $scope.contractNotDone = function(contr){
     $scope.contractNotDone = function(contr){
     $scope.initProviders = function(contr,providerAddress,providersAmount){
     $scope.initProviders = function(contr,providerAddress,providersAmount,iter){
     $scope.myFunds = web3.fromWei(web3.eth.getBalance(web3.eth.coinbase),"ether");
     $scope.myFunds = web3.fromWei(web3.eth.getBalance(web3.eth.coinbase),"ether");
     $scope.myToken = accounts[0];
     $scope.myToken = accounts[0];
     $scope.payNew = function(contr,ingridientAmount){
     $scope.payNew = function(contr,provAddr,amountOfMoney,ingridientAmount,iter){
     $scope.testMethod = function(contr){                
     $scope.testMethod = function(contr){                
     /*for(var i = 0; i < pizza.ingridients.length; i ++){
     //0x41d4c8178ff0fad76a86fef2188672ac7f8d54f2 (blockchain) - doubleKey
     //0x41d4c8178ff0fad76a86fef2188672ac7f8d54f2 (blockchain) - doubleKey
     var accounts = web3.eth.accounts;
     var accounts = web3.eth.accounts;
     var firstContractAddress = "0x96340dfb3eff229b758f95f1365241411609ec9c"; 
     var secondContractAddress = "0x3212f15e6eed354ecc013e7b41454384badef96c";
     var secondContractAddress = "0x3212f15e6eed354ecc013e7b41454384badef96c";
     var thirdContractAddress = "0x2f95648a1965db9e60f827999e40108d1159222e";
     web3.setProvider(new web3.providers.HttpProvider("http://127.0.0.1:8545"));
     web3.setProvider(new web3.providers.HttpProvider("http://127.0.0.1:8545"));
     };
     };
     };
     };
     };
     };
     }; 
     }; 
     }; 
     }; 
     }; 
     }; */
    $mdDialog.show({
    $scope.contracts.push({
    //[{"constant":false,"inputs":[],"name":"customerConfirm","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"contractDone","outputs":[{"name":"","type":"bool"}],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"provAddrs","type":"address"},{"name":"count","type":"uint256"}],"name":"init","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"contractNotDone","outputs":[],"payable":true,"type":"function"},{"constant":false,"inputs":[],"name":"returnState","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"providerConfirm","outputs":[],"payable":false,"type":"function"},{"constant":false,"inputs":[{"name":"goods","type":"uint256"}],"name":"pay","outputs":[{"name":"","type":"uint256"}],"payable":true,"type":"function"},{"constant":false,"inputs":[{"name":"warrAmount","type":"uint256"}],"name":"warranty","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function"},{"constant":false,"inputs":[],"name":"checkBalance","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function"},{"payable":true,"type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"sender","type":"address"},{"indexed":false,"name":"_provAddress","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"Deposit","type":"event"}];
    //Double-key ABI:
    ];
    address1_1, address2_1, volume_1, date_1, cost_1, warrantyLimit_1) {
    alert($scope.cost);
    var pizzas = [
    var variable;
    var web3 = new Web3();   
    var web3 = new Web3();   
    }).then(function(answer) {
    });
    });
    },
    },
    }, function() {
  $mdThemingProvider.theme('dark-blue').backgroundPalette('blue').dark();
  $mdThemingProvider.theme('dark-grey').backgroundPalette('grey').dark();
  $mdThemingProvider.theme('dark-orange').backgroundPalette('orange').dark();
  $mdThemingProvider.theme('dark-purple').backgroundPalette('deep-purple').dark();
  $scope.addContract = function(name1, type1, company1_1, company2_1, 
  $scope.address1 ;
  $scope.address2 ;
  $scope.company1 ;
  $scope.company2 ;
  $scope.contracts= [];
  $scope.cost;
  $scope.createContract = function(){
  $scope.date;
  $scope.pizzas = pizzas;
  $scope.showAdvanced = function(ev, pizza) {
  $scope.volume;
  $scope.warrantyLimit;
  this.pizzas = pizzas;
  }
  };
  };
  };
$scope.showAdvanced2 = function(ev, pizza, url) {
$scope.showAdvanced3 = function(ev, pizza, url) {
$scope.showDialogByUrl = function(ev, contract, url) {
(function(){
//---------------------------------------------
//---------------------------------------------
app.config(function($mdThemingProvider) {
app.controller('smartDealsController',function($scope,$mdDialog){
var app = angular.module('smartDeals', ['ngMaterial','ngMessages']);
})();
});
});
};
};